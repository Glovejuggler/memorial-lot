import{s as A,j as g,v as D,x as q,y as E,o as u,f as d,r as T,k as Z,T as $,a as s,u as l,b as o,F as S,m as L,w as V,Z as z,t as n,q as m,g as b,d as j,p as F}from"./app-B8RcA6yV.js";import{a as f,_ as p}from"./TextInput-Ben5HfjV.js";import{_ as U}from"./Modal-aYQBKWnA.js";const M={__name:"Select",props:{modelValue:{type:String,required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(r,{expose:K}){const k=A(r,"modelValue"),v=g(null);return D(()=>{v.value.hasAttribute("autofocus")&&v.value.focus()}),K({focus:()=>v.value.focus()}),(c,x)=>q((u(),d("select",{class:"border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm","onUpdate:modelValue":x[0]||(x[0]=y=>k.value=y),ref_key:"input",ref:v},[T(c.$slots,"default")],512)),[[E,k.value]])}},G={class:"py-8"},H={class:"max-w-7xl mx-auto px-6 lg:px-8"},J={class:"py-4 flex justify-between"},Q={key:0,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border dark:border-gray-700 mt-4"},R={class:"relative overflow-x-auto rounded-lg"},W={class:"w-full text-sm text-left text-gray-500 dark:text-gray-100"},X={class:"bg-white dark:bg-gray-800 border-b dark:border-gray-700 last:border-none hover:bg-black/10 cursor-pointer"},Y={scope:"row",class:"px-6 py-4 font-medium text-gray-900 dark:text-gray-200 whitespace-nowrap"},ee={class:"px-6 py-4"},te={class:"px-6 py-4"},oe={class:"px-6 py-4"},re={class:"px-6 py-4"},le={class:"px-6 py-4"},se={class:"space-x-2"},ne=["onClick"],ae=["onClick"],ue={key:1,class:"flex justify-center mt-12 dark:text-gray-400 text-gray-700"},de={class:"p-4 dark:text-white"},ie=["value"],ce={key:0,class:"text-sm text-red-500"},me={key:1,class:"text-sm text-red-500"},be={key:2,class:"text-sm text-red-500 mt-0"},pe={key:3,class:"text-sm text-red-500"},xe={key:4,class:"text-sm text-red-500 mt-0"},fe={class:"mt-6 flex flex-col-reverse md:flex-row justify-end md:space-x-6"},ve=["disabled"],ge={class:"p-4 dark:text-white"},ke=["value"],ye={key:0,class:"text-sm text-red-500"},we={key:1,class:"text-sm text-red-500"},he={key:2,class:"text-sm text-red-500 mt-0"},_e={key:3,class:"text-sm text-red-500"},Ve={key:4,class:"text-sm text-red-500 mt-0"},Ce={class:"mt-6 flex flex-col-reverse md:flex-row justify-end md:space-x-6"},Se=["disabled"],$e={class:"p-4 dark:text-white"},Le={class:"flex justify-center items-center flex-col"},je={class:"grid grid-cols-2 gap-2 mt-6"},Oe={__name:"Index",props:{blocks:Object,lots:Object,filters:Object,errors:Object},setup(r){const k=g({search:r.filters.search});Z(k,i=>{F.get(route("lots.index"),i,{preserveState:!0,preserveScroll:!0,replace:!0})},{deep:!0});const v=g(!1),c=$({block_id:"",lot_number:"",contract_number:"",price:"",owner:""}),x=()=>{c.post(route("lots.store"),{preserveState:i=>Object.keys(i.props.errors).length>0,preserveScroll:!0})},y=g(!1),a=$({block_id:"",lot_number:"",contract_number:"",price:"",owner:"",id:""}),N=i=>{a.id=i.id,a.lot_number=i.lot_number,a.contract_number=i.contract_number,a.price=i.price,a.owner=i.owner,a.block_id=i.block_id,y.value=!0},w=()=>{a.put(route("lots.update",a.id),{preserveScroll:!0,preserveState:i=>Object.keys(i.props.errors).length>0,onSuccess:i=>{Object.keys(i.props.errors).length===1&&N.reset()}})},h=g(!1),_=g(null),B=i=>{_.value=i,h.value=!0},O=g(null),C=$({file:""}),I=()=>{C.post(route("lots.import"),{preserveScroll:!0,preserveState:!1,onSuccess:()=>C.reset("file"),onCancel:()=>C.reset("file")})};return(i,e)=>(u(),d(S,null,[s(l(z),{title:"Lots"}),o("input",{onInput:e[0]||(e[0]=t=>l(C).file=t.target.files[0]),onChange:I,type:"file",hidden:"",name:"import",id:"import",ref_key:"importFileInput",ref:O,accept:"application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},null,544),o("div",G,[o("div",H,[o("div",J,[o("div",null,[e[20]||(e[20]=o("span",{class:"dark:text-white text-lg font-bold mr-4"},"Lots",-1)),o("button",{onClick:e[1]||(e[1]=t=>v.value=!0),class:"bg-blue-500 px-4 text-sm rounded-md text-white hover:bg-blue-700 active:bg-blue-800 ease-in-out duration-200"},"Add new"),o("button",{onClick:e[2]||(e[2]=t=>O.value.click()),class:"bg-green-500 px-4 text-sm rounded-md text-white hover:bg-green-700 active:bg-green-800 ease-in-out duration-200 ml-4"},"Import")]),s(f,{modelValue:k.value.search,"onUpdate:modelValue":e[3]||(e[3]=t=>k.value.search=t),type:"text",class:"lg:w-96 lg:mt-0 w-full",placeholder:"Search"},null,8,["modelValue"])]),r.lots.length?(u(),d("div",Q,[o("div",R,[o("table",W,[e[21]||(e[21]=o("thead",{class:"text-xs text-gray-700 dark:text-gray-200 uppercase bg-gray-50 dark:bg-gray-800"},[o("tr",null,[o("th",{scope:"col",class:"px-6 py-3"}," Contract Number "),o("th",{scope:"col",class:"px-6 py-3"}," Owner "),o("th",{scope:"col",class:"px-6 py-3"}," Block Number "),o("th",{scope:"col",class:"px-6 py-3"}," Lot Number "),o("th",{scope:"col",class:"px-6 py-3"}," Price "),o("th",{scope:"col",class:"px-6 py-3"}," Actions ")])],-1)),o("tbody",null,[(u(!0),d(S,null,L(r.lots,t=>(u(),d("tr",X,[o("th",Y,n(t.contract_number??"-"),1),o("td",ee,n(t.owner??"-"),1),o("td",te,n(t.block.block_number),1),o("td",oe,n(t.lot_number),1),o("td",re,n(Number(t.price).toAmountFormat()),1),o("td",le,[o("div",se,[o("i",{onClick:P=>N(t),class:"bx bx-edit w-5 h-5 rounded-full bg-green-500 hover:bg-green-700 active:bg-green-900 ease-in-out duration-200 inline-flex justify-center items-center"},null,8,ne),o("i",{onClick:P=>B(t),class:"bx bx-trash w-5 h-5 rounded-full bg-red-500 hover:bg-red-700 active:bg-red-900 ease-in-out duration-200 inline-flex justify-center items-center"},null,8,ae)])])]))),256))])])])])):(u(),d("div",ue,e[22]||(e[22]=[o("span",null,"No data.",-1)])))])]),s(U,{show:v.value,closeable:!1},{default:V(()=>[o("div",de,[s(p,{for:"block_number",value:"Block number"}),s(M,{onKeyup:m(x,["enter"]),id:"block_number",class:"mt-1 block w-full",modelValue:l(c).block_id,"onUpdate:modelValue":e[4]||(e[4]=t=>l(c).block_id=t)},{default:V(()=>[(u(!0),d(S,null,L(r.blocks,t=>(u(),d("option",{value:t.id},n(`${t.block_number} (${t.name})`),9,ie))),256))]),_:1},8,["modelValue"]),r.errors.block_id?(u(),d("span",ce,n(r.errors.block_id),1)):b("",!0),s(p,{class:"mt-4",for:"lot_number",value:"Lot number"}),s(f,{onKeyup:m(x,["enter"]),id:"lot_number",type:"text",class:"mt-1 block w-full",modelValue:l(c).lot_number,"onUpdate:modelValue":e[5]||(e[5]=t=>l(c).lot_number=t)},null,8,["modelValue"]),r.errors.lot_number?(u(),d("span",me,n(r.errors.lot_number),1)):b("",!0),s(p,{class:"mt-4",for:"price",value:"Price"}),s(f,{onKeyup:m(x,["enter"]),id:"price",type:"number",class:"mt-1 block w-full",modelValue:l(c).price,"onUpdate:modelValue":e[6]||(e[6]=t=>l(c).price=t)},null,8,["modelValue"]),r.errors.price?(u(),d("span",be,n(r.errors.price),1)):b("",!0),s(p,{class:"mt-4",for:"contract_number",value:"Contract number"}),s(f,{onKeyup:m(x,["enter"]),id:"contract_number",type:"text",class:"mt-1 block w-full",modelValue:l(c).contract_number,"onUpdate:modelValue":e[7]||(e[7]=t=>l(c).contract_number=t)},null,8,["modelValue"]),r.errors.contract_number?(u(),d("span",pe,n(r.errors.contract_number),1)):b("",!0),s(p,{class:"mt-4",for:"owner",value:"Owner"}),s(f,{onKeyup:m(x,["enter"]),id:"owner",type:"text",class:"mt-1 block w-full",modelValue:l(c).owner,"onUpdate:modelValue":e[8]||(e[8]=t=>l(c).owner=t)},null,8,["modelValue"]),r.errors.owner?(u(),d("span",xe,n(r.errors.owner),1)):b("",!0),o("div",fe,[o("button",{onClick:e[9]||(e[9]=t=>v.value=!1),type:"button",class:"dark:text-white hover:underline md:mt-0 mt-4"},"Cancel"),o("button",{onClick:x,disabled:l(c).processing,class:"bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-700 active:bg-green-900 ease-in-out duration-200 disabled:opacity-20"},n(l(c).processing?"Processing":"Submit"),9,ve)])])]),_:1},8,["show"]),s(U,{show:y.value,onClose:e[16]||(e[16]=t=>y.value=!1)},{default:V(()=>[o("div",ge,[s(p,{for:"block_number",value:"Block number"}),s(M,{onKeyup:m(w,["enter"]),id:"block_number",class:"mt-1 block w-full",modelValue:l(a).block_id,"onUpdate:modelValue":e[10]||(e[10]=t=>l(a).block_id=t)},{default:V(()=>[(u(!0),d(S,null,L(r.blocks,t=>(u(),d("option",{value:t.id},n(`${t.block_number} (${t.name})`),9,ke))),256))]),_:1},8,["modelValue"]),r.errors.block_id?(u(),d("span",ye,n(r.errors.block_id),1)):b("",!0),s(p,{class:"mt-4",for:"lot_number",value:"Lot number"}),s(f,{onKeyup:m(w,["enter"]),id:"lot_number",type:"text",class:"mt-1 block w-full",modelValue:l(a).lot_number,"onUpdate:modelValue":e[11]||(e[11]=t=>l(a).lot_number=t)},null,8,["modelValue"]),r.errors.lot_number?(u(),d("span",we,n(r.errors.lot_number),1)):b("",!0),s(p,{class:"mt-4",for:"price",value:"Price"}),s(f,{onKeyup:m(w,["enter"]),id:"price",type:"number",class:"mt-1 block w-full",modelValue:l(a).price,"onUpdate:modelValue":e[12]||(e[12]=t=>l(a).price=t)},null,8,["modelValue"]),r.errors.price?(u(),d("span",he,n(r.errors.price),1)):b("",!0),s(p,{class:"mt-4",for:"contract_number",value:"Contract number"}),s(f,{onKeyup:m(w,["enter"]),id:"contract_number",type:"text",class:"mt-1 block w-full",modelValue:l(a).contract_number,"onUpdate:modelValue":e[13]||(e[13]=t=>l(a).contract_number=t)},null,8,["modelValue"]),r.errors.contract_number?(u(),d("span",_e,n(r.errors.contract_number),1)):b("",!0),s(p,{class:"mt-4",for:"owner",value:"Owner"}),s(f,{onKeyup:m(w,["enter"]),id:"owner",type:"text",class:"mt-1 block w-full",modelValue:l(a).owner,"onUpdate:modelValue":e[14]||(e[14]=t=>l(a).owner=t)},null,8,["modelValue"]),r.errors.owner?(u(),d("span",Ve,n(r.errors.owner),1)):b("",!0),o("div",Ce,[o("button",{onClick:e[15]||(e[15]=t=>y.value=!1),type:"button",class:"dark:text-white hover:underline md:mt-0 mt-4"},"Cancel"),o("button",{onClick:w,disabled:l(a).processing,class:"bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-700 active:bg-green-900 ease-in-out duration-200 disabled:opacity-20"},n(l(a).processing?"Processing":"Submit"),9,Se)])])]),_:1},8,["show"]),s(U,{show:h.value,onClose:e[19]||(e[19]=t=>h.value=!1)},{default:V(()=>[o("div",$e,[o("div",Le,[e[26]||(e[26]=o("i",{class:"bx bx-info-circle text-7xl text-red-500"},null,-1)),o("p",null,[e[23]||(e[23]=j("Delete block number ")),o("b",null,n(_.value.block.block_number),1),e[24]||(e[24]=j(" lot number ")),o("b",null,n(_.value.lot_number),1),e[25]||(e[25]=j("?"))])]),o("div",je,[o("button",{onClick:e[17]||(e[17]=t=>l(F).delete(i.route("lots.destroy",_.value),{onSuccess:()=>{_.value=null,h.value=!1}})),class:"text-white bg-red-500 hover:bg-red-700 active:bg-red-900 rounded-md py-1 ease-in-out duration-200"},"Delete"),o("button",{onClick:e[18]||(e[18]=t=>h.value=!1),class:"border dark:border-gray-100 border-black hover:bg-black hover:text-white dark:hover:bg-gray-100 dark:hover:text-gray-800 py-1 rounded-md ease-in-out duration-200"},"Cancel")])])]),_:1},8,["show"])],64))}};export{Oe as default};
