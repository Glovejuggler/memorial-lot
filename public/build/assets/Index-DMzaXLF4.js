import{j as g,k as E,T as $,f as d,a as o,u as r,b as l,w as f,F as w,m as _,o as u,Z as M,t as a,n as z,q as m,g as b,d as j,p as T}from"./app-DYdx_Dz3.js";import{a as y,_ as p}from"./TextInput-DVsBTgbB.js";import{_ as V}from"./Select-J2PycDgA.js";import{_ as O}from"./Modal-CMAuzbP9.js";const q={class:"py-8"},Z={class:"max-w-screen-2xl mx-auto px-6 lg:px-8"},G={class:"py-4 flex justify-between"},H=["href"],J=["value"],Q={key:0,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border dark:border-gray-700 mt-4"},R={class:"relative overflow-x-auto rounded-lg"},W={class:"w-full text-sm text-left text-gray-500 dark:text-gray-100"},X={class:"bg-white dark:bg-gray-800 border-b dark:border-gray-700 last:border-none hover:bg-black/10 cursor-pointer"},Y={scope:"row",class:"px-2 py-4 font-medium text-gray-900 dark:text-gray-200 whitespace-nowrap"},ee={class:"px-2 py-4"},te={class:"px-2 py-4"},le={class:"px-2 py-4"},se={class:"px-2 py-4"},oe={class:"px-2 py-4"},re={class:"px-2 py-4"},ae={class:"px-2 py-4"},ne={class:"px-2 py-4"},de={class:"px-2 py-4"},ue={class:"space-x-1"},ie=["onClick"],ce=["onClick"],me={key:1,class:"flex justify-center mt-12 dark:text-gray-400 text-gray-700"},be={class:"p-4 dark:text-white"},pe=["value"],ye={key:0,class:"text-sm text-red-500"},xe={key:1,class:"text-sm text-red-500"},ve={key:2,class:"text-sm text-red-500"},fe={key:3,class:"text-sm text-red-500"},ke={key:4,class:"text-sm text-red-500 mt-0"},ge={key:5,class:"text-sm text-red-500"},we={key:6,class:"text-sm text-red-500 mt-0"},Ve={key:7,class:"text-sm text-red-500 mt-0"},he={key:8,class:"text-sm text-red-500 mt-0"},Ce={class:"grid grid-cols-2 gap-2"},_e={key:0,class:"text-sm text-red-500 mt-0"},Ue={key:0,class:"text-sm text-red-500 mt-0"},Se={class:"mt-6 flex flex-col-reverse md:flex-row justify-end md:space-x-6"},Ke=["disabled"],Le={class:"p-4 dark:text-white"},$e=["value"],je={key:0,class:"text-sm text-red-500"},Oe={key:1,class:"text-sm text-red-500"},Ae={key:2,class:"text-sm text-red-500"},Ne={key:3,class:"text-sm text-red-500"},Ie={key:4,class:"text-sm text-red-500 mt-0"},Fe={key:5,class:"text-sm text-red-500"},Te={key:6,class:"text-sm text-red-500 mt-0"},Be={key:7,class:"text-sm text-red-500 mt-0"},De={key:8,class:"text-sm text-red-500 mt-0"},Pe={class:"grid grid-cols-2 gap-2"},Ee={key:0,class:"text-sm text-red-500 mt-0"},Me={key:0,class:"text-sm text-red-500 mt-0"},ze={class:"mt-6 flex flex-col-reverse md:flex-row justify-end md:space-x-6"},qe=["disabled"],Ze={class:"p-4 dark:text-white"},Ge={class:"flex justify-center items-center flex-col"},He={class:"grid grid-cols-2 gap-2 mt-6"},Je={id:"lot_types"},Qe=["value"],et={__name:"Index",props:{blocks:Object,lots:Object,filters:Object,errors:Object,lot_types:Object},setup(s){const K=s,k=g({search:K.filters.search,status:K.filters.status??"",type:K.filters.type??"any"});E(k,c=>{T.get(route("lots.index"),c,{preserveState:!0,preserveScroll:!0,replace:!0})},{deep:!0});const L=g(!1),i=$({block_id:"",lot_number:"",contract_number:"",price:"",owner:"",address:"",contact:"",type:"",co:"",date_sold:""}),x=()=>{i.post(route("lots.store"),{preserveState:c=>Object.keys(c.props.errors).length>0,preserveScroll:!0})},U=g(!1),n=$({block_id:"",lot_number:"",contract_number:"",price:"",owner:"",id:"",address:"",contact:"",type:"",status:"",co:"",date_sold:""}),A=c=>{n.id=c.id,n.lot_number=c.lot_number,n.contract_number=c.contract_number,n.price=c.price,n.owner=c.owner,n.block_id=c.block_id,n.address=c.address,n.contact=c.contact,n.type=c.type,n.status=c.status,n.co=c.co,n.date_sold=c.date_sold,U.value=!0},v=()=>{n.put(route("lots.update",n.id),{preserveScroll:!0,preserveState:c=>Object.keys(c.props.errors).length>0,onSuccess:c=>{Object.keys(c.props.errors).length===1&&A.reset()}})},h=g(!1),C=g(null),B=c=>{C.value=c,h.value=!0},N=g(null),S=$({file:""}),D=()=>{S.post(route("lots.import"),{preserveScroll:!0,preserveState:!1,onSuccess:()=>S.reset("file"),onCancel:()=>S.reset("file")})};return(c,e)=>(u(),d(w,null,[o(r(M),{title:"Lots"}),l("input",{onInput:e[0]||(e[0]=t=>r(S).file=t.target.files[0]),onChange:D,type:"file",hidden:"",name:"import",id:"import",ref_key:"importFileInput",ref:N,accept:"application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},null,544),l("div",q,[l("div",Z,[l("div",G,[l("div",null,[e[34]||(e[34]=l("span",{class:"dark:text-white text-lg font-bold mr-4"},"Lots",-1)),l("button",{onClick:e[1]||(e[1]=t=>L.value=!0),class:"bg-blue-500 px-4 text-sm rounded-md text-white hover:bg-blue-700 active:bg-blue-800 ease-in-out duration-200"},"Add new"),l("button",{onClick:e[2]||(e[2]=t=>N.value.click()),class:"bg-green-500 px-4 text-sm rounded-md text-white hover:bg-green-700 active:bg-green-800 ease-in-out duration-200 ml-4"},"Import"),l("a",{href:c.route("lots.export"),class:"bg-yellow-500 px-4 text-sm rounded-md text-white hover:bg-yellow-700 active:bg-yellow-800 ease-in-out duration-200 ml-4"},"Export",8,H)]),l("div",null,[o(V,{modelValue:k.value.type,"onUpdate:modelValue":e[3]||(e[3]=t=>k.value.type=t)},{default:f(()=>[e[35]||(e[35]=l("option",{value:"any"},"Any",-1)),(u(!0),d(w,null,_(s.lot_types,t=>(u(),d("option",{value:t??"none"},a(t??"Uncategorized"),9,J))),256))]),_:1},8,["modelValue"]),o(V,{modelValue:k.value.status,"onUpdate:modelValue":e[4]||(e[4]=t=>k.value.status=t)},{default:f(()=>e[36]||(e[36]=[l("option",{value:""},"All",-1),l("option",{value:"available"},"Available",-1),l("option",{value:"sold"},"Sold",-1),l("option",{value:"installment"},"Installment",-1)])),_:1},8,["modelValue"]),o(y,{modelValue:k.value.search,"onUpdate:modelValue":e[5]||(e[5]=t=>k.value.search=t),type:"text",class:"lg:w-96 lg:mt-0 w-full",placeholder:"Search"},null,8,["modelValue"])])]),s.lots.length?(u(),d("div",Q,[l("div",R,[l("table",W,[e[37]||(e[37]=l("thead",{class:"text-xs text-gray-700 dark:text-gray-200 uppercase bg-gray-50 dark:bg-gray-800"},[l("tr",null,[l("th",{scope:"col",class:"p-3"}," Block Number "),l("th",{scope:"col",class:"p-3"}," Lot Number "),l("th",{scope:"col",class:"p-3"}," Type/Category "),l("th",{scope:"col",class:"p-3"}," Status "),l("th",{scope:"col",class:"p-3"}," Contract Number "),l("th",{scope:"col",class:"p-3"}," Owner "),l("th",{scope:"col",class:"p-3"}," Address "),l("th",{scope:"col",class:"p-3"}," Contact no. "),l("th",{scope:"col",class:"p-3"}," Price "),l("th",{scope:"col",class:"p-3"}," Actions ")])],-1)),l("tbody",null,[(u(!0),d(w,null,_(s.lots,t=>{var I,F;return u(),d("tr",X,[l("th",Y,a(t.block.block_number??"-"),1),l("td",ee,a(t.lot_number),1),l("td",te,a(t.type??"-"),1),l("td",le,[l("span",{class:z(["text-xs rounded-lg text-white px-2",{"bg-blue-500":!t.status,"bg-yellow-500":((I=t.status)==null?void 0:I.toUpperCase())=="INSTALLMENT","bg-green-500":((F=t.status)==null?void 0:F.toUpperCase())=="SOLD"}])},a(t.status??"Available"),3)]),l("td",se,a(t.contract_number??"-"),1),l("td",oe,a(t.owner??"-"),1),l("td",re,a(t.address??"-"),1),l("td",ae,a(t.contact??"-"),1),l("td",ne,a(Number(t.price).toAmountFormat()),1),l("td",de,[l("div",ue,[l("i",{onClick:P=>A(t),class:"bx bx-edit w-6 h-6 rounded-full bg-green-500 hover:bg-green-700 active:bg-green-900 ease-in-out duration-200 inline-flex justify-center items-center"},null,8,ie),l("i",{onClick:P=>B(t),class:"bx bx-trash w-6 h-6 rounded-full bg-red-500 hover:bg-red-700 active:bg-red-900 ease-in-out duration-200 inline-flex justify-center items-center"},null,8,ce)])])])}),256))])])])])):(u(),d("div",me,e[38]||(e[38]=[l("span",null,"No data.",-1)])))])]),o(O,{show:L.value,closeable:!1},{default:f(()=>[l("div",be,[o(p,{for:"block_number",value:"Block number"}),o(V,{onKeyup:m(x,["enter"]),id:"block_number",class:"mt-1 block w-full",modelValue:r(i).block_id,"onUpdate:modelValue":e[6]||(e[6]=t=>r(i).block_id=t)},{default:f(()=>[(u(!0),d(w,null,_(s.blocks,t=>(u(),d("option",{value:t.id},a(`${t.block_number} (${t.name})`),9,pe))),256))]),_:1},8,["modelValue"]),s.errors.block_id?(u(),d("span",ye,a(s.errors.block_id),1)):b("",!0),o(p,{class:"mt-4",for:"type",value:"Type/Category"}),o(y,{list:"lot_types",onKeyup:m(x,["enter"]),id:"type",class:"mt-1 block w-full",modelValue:r(i).type,"onUpdate:modelValue":e[7]||(e[7]=t=>r(i).type=t)},null,8,["modelValue"]),s.errors.type?(u(),d("span",xe,a(s.errors.type),1)):b("",!0),o(p,{class:"mt-4",for:"lot_number",value:"Lot number"}),o(y,{onKeyup:m(x,["enter"]),id:"lot_number",type:"text",class:"mt-1 block w-full",modelValue:r(i).lot_number,"onUpdate:modelValue":e[8]||(e[8]=t=>r(i).lot_number=t)},null,8,["modelValue"]),s.errors.lot_number?(u(),d("span",ve,a(s.errors.lot_number),1)):b("",!0),o(p,{class:"mt-4",for:"status",value:"Status"}),o(V,{onKeyup:m(x,["enter"]),id:"status",type:"text",class:"mt-1 block w-full",modelValue:r(i).status,"onUpdate:modelValue":e[9]||(e[9]=t=>r(i).status=t)},{default:f(()=>e[39]||(e[39]=[l("option",{value:""},"Available",-1),l("option",{value:"Installment"},"Installment",-1),l("option",{value:"Sold"},"Sold",-1)])),_:1},8,["modelValue"]),s.errors.status?(u(),d("span",fe,a(s.errors.status),1)):b("",!0),o(p,{class:"mt-4",for:"price",value:"Price"}),o(y,{onKeyup:m(x,["enter"]),id:"price",type:"number",class:"mt-1 block w-full",modelValue:r(i).price,"onUpdate:modelValue":e[10]||(e[10]=t=>r(i).price=t)},null,8,["modelValue"]),s.errors.price?(u(),d("span",ke,a(s.errors.price),1)):b("",!0),o(p,{class:"mt-4",for:"contract_number",value:"Contract number"}),o(y,{onKeyup:m(x,["enter"]),id:"contract_number",type:"text",class:"mt-1 block w-full",modelValue:r(i).contract_number,"onUpdate:modelValue":e[11]||(e[11]=t=>r(i).contract_number=t)},null,8,["modelValue"]),s.errors.contract_number?(u(),d("span",ge,a(s.errors.contract_number),1)):b("",!0),o(p,{class:"mt-4",for:"owner",value:"Owner"}),o(y,{onKeyup:m(x,["enter"]),id:"owner",type:"text",class:"mt-1 block w-full",modelValue:r(i).owner,"onUpdate:modelValue":e[12]||(e[12]=t=>r(i).owner=t)},null,8,["modelValue"]),s.errors.owner?(u(),d("span",we,a(s.errors.owner),1)):b("",!0),o(p,{class:"mt-4",for:"address",value:"Address"}),o(y,{onKeyup:m(x,["enter"]),id:"address",type:"text",class:"mt-1 block w-full",modelValue:r(i).address,"onUpdate:modelValue":e[13]||(e[13]=t=>r(i).address=t)},null,8,["modelValue"]),s.errors.address?(u(),d("span",Ve,a(s.errors.address),1)):b("",!0),o(p,{class:"mt-4",for:"contact",value:"Contact no."}),o(y,{onKeyup:m(x,["enter"]),id:"contact",type:"text",class:"mt-1 block w-full",modelValue:r(i).contact,"onUpdate:modelValue":e[14]||(e[14]=t=>r(i).contact=t)},null,8,["modelValue"]),s.errors.contact?(u(),d("span",he,a(s.errors.contact),1)):b("",!0),l("div",Ce,[l("div",null,[o(p,{class:"mt-4",for:"co",value:"Certificate of Ownership no."}),o(y,{onKeyup:m(x,["enter"]),id:"co",type:"text",class:"mt-1 block w-full",modelValue:r(i).co,"onUpdate:modelValue":e[15]||(e[15]=t=>r(i).co=t)},null,8,["modelValue"]),s.errors.co?(u(),d("span",_e,a(s.errors.co),1)):b("",!0)]),l("div",null,[o(p,{class:"mt-4",for:"date_sold",value:"Date sold"}),o(y,{onKeyup:m(x,["enter"]),id:"date_sold",type:"date",class:"mt-1 block w-full",modelValue:r(i).date_sold,"onUpdate:modelValue":e[16]||(e[16]=t=>r(i).date_sold=t)},null,8,["modelValue"]),s.errors.date_sold?(u(),d("span",Ue,a(s.errors.date_sold),1)):b("",!0)])]),l("div",Se,[l("button",{onClick:e[17]||(e[17]=t=>L.value=!1),type:"button",class:"dark:text-white hover:underline md:mt-0 mt-4"},"Cancel"),l("button",{onClick:x,disabled:r(i).processing,class:"bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-700 active:bg-green-900 ease-in-out duration-200 disabled:opacity-20"},a(r(i).processing?"Processing":"Submit"),9,Ke)])])]),_:1},8,["show"]),o(O,{show:U.value,onClose:e[30]||(e[30]=t=>U.value=!1)},{default:f(()=>[l("div",Le,[o(p,{for:"block_number",value:"Block number"}),o(V,{onKeyup:m(v,["enter"]),id:"block_number",class:"mt-1 block w-full",modelValue:r(n).block_id,"onUpdate:modelValue":e[18]||(e[18]=t=>r(n).block_id=t)},{default:f(()=>[(u(!0),d(w,null,_(s.blocks,t=>(u(),d("option",{value:t.id},a(`${t.block_number} (${t.name})`),9,$e))),256))]),_:1},8,["modelValue"]),s.errors.block_id?(u(),d("span",je,a(s.errors.block_id),1)):b("",!0),o(p,{class:"mt-4",for:"type",value:"Type/Category"}),o(y,{list:"lot_types",onKeyup:m(v,["enter"]),id:"type",class:"mt-1 block w-full",modelValue:r(n).type,"onUpdate:modelValue":e[19]||(e[19]=t=>r(n).type=t)},null,8,["modelValue"]),s.errors.type?(u(),d("span",Oe,a(s.errors.type),1)):b("",!0),o(p,{class:"mt-4",for:"lot_number",value:"Lot number"}),o(y,{onKeyup:m(v,["enter"]),id:"lot_number",type:"text",class:"mt-1 block w-full",modelValue:r(n).lot_number,"onUpdate:modelValue":e[20]||(e[20]=t=>r(n).lot_number=t)},null,8,["modelValue"]),s.errors.lot_number?(u(),d("span",Ae,a(s.errors.lot_number),1)):b("",!0),o(p,{class:"mt-4",for:"status",value:"Status"}),o(V,{onKeyup:m(v,["enter"]),id:"status",type:"text",class:"mt-1 block w-full",modelValue:r(n).status,"onUpdate:modelValue":e[21]||(e[21]=t=>r(n).status=t)},{default:f(()=>e[40]||(e[40]=[l("option",{value:""},"Available",-1),l("option",{value:"Installment"},"Installment",-1),l("option",{value:"Sold"},"Sold",-1)])),_:1},8,["modelValue"]),s.errors.status?(u(),d("span",Ne,a(s.errors.status),1)):b("",!0),o(p,{class:"mt-4",for:"price",value:"Price"}),o(y,{onKeyup:m(v,["enter"]),id:"price",type:"number",class:"mt-1 block w-full",modelValue:r(n).price,"onUpdate:modelValue":e[22]||(e[22]=t=>r(n).price=t)},null,8,["modelValue"]),s.errors.price?(u(),d("span",Ie,a(s.errors.price),1)):b("",!0),o(p,{class:"mt-4",for:"contract_number",value:"Contract number"}),o(y,{onKeyup:m(v,["enter"]),id:"contract_number",type:"text",class:"mt-1 block w-full",modelValue:r(n).contract_number,"onUpdate:modelValue":e[23]||(e[23]=t=>r(n).contract_number=t)},null,8,["modelValue"]),s.errors.contract_number?(u(),d("span",Fe,a(s.errors.contract_number),1)):b("",!0),o(p,{class:"mt-4",for:"owner",value:"Owner"}),o(y,{onKeyup:m(v,["enter"]),id:"owner",type:"text",class:"mt-1 block w-full",modelValue:r(n).owner,"onUpdate:modelValue":e[24]||(e[24]=t=>r(n).owner=t)},null,8,["modelValue"]),s.errors.owner?(u(),d("span",Te,a(s.errors.owner),1)):b("",!0),o(p,{class:"mt-4",for:"address",value:"Address"}),o(y,{onKeyup:m(v,["enter"]),id:"address",type:"text",class:"mt-1 block w-full",modelValue:r(n).address,"onUpdate:modelValue":e[25]||(e[25]=t=>r(n).address=t)},null,8,["modelValue"]),s.errors.address?(u(),d("span",Be,a(s.errors.address),1)):b("",!0),o(p,{class:"mt-4",for:"contact",value:"Contact no."}),o(y,{onKeyup:m(v,["enter"]),id:"contact",type:"text",class:"mt-1 block w-full",modelValue:r(n).contact,"onUpdate:modelValue":e[26]||(e[26]=t=>r(n).contact=t)},null,8,["modelValue"]),s.errors.contact?(u(),d("span",De,a(s.errors.contact),1)):b("",!0),l("div",Pe,[l("div",null,[o(p,{class:"mt-4",for:"co",value:"Certificate of Ownership no."}),o(y,{onKeyup:m(v,["enter"]),id:"co",type:"text",class:"mt-1 block w-full",modelValue:r(n).co,"onUpdate:modelValue":e[27]||(e[27]=t=>r(n).co=t)},null,8,["modelValue"]),s.errors.co?(u(),d("span",Ee,a(s.errors.co),1)):b("",!0)]),l("div",null,[o(p,{class:"mt-4",for:"date_sold",value:"Date sold"}),o(y,{onKeyup:m(v,["enter"]),id:"date_sold",type:"date",class:"mt-1 block w-full",modelValue:r(n).date_sold,"onUpdate:modelValue":e[28]||(e[28]=t=>r(n).date_sold=t)},null,8,["modelValue"]),s.errors.date_sold?(u(),d("span",Me,a(s.errors.date_sold),1)):b("",!0)])]),l("div",ze,[l("button",{onClick:e[29]||(e[29]=t=>U.value=!1),type:"button",class:"dark:text-white hover:underline md:mt-0 mt-4"},"Cancel"),l("button",{onClick:v,disabled:r(n).processing,class:"bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-700 active:bg-green-900 ease-in-out duration-200 disabled:opacity-20"},a(r(n).processing?"Processing":"Submit"),9,qe)])])]),_:1},8,["show"]),o(O,{show:h.value,onClose:e[33]||(e[33]=t=>h.value=!1)},{default:f(()=>[l("div",Ze,[l("div",Ge,[e[44]||(e[44]=l("i",{class:"bx bx-info-circle text-7xl text-red-500"},null,-1)),l("p",null,[e[41]||(e[41]=j("Delete block number ")),l("b",null,a(C.value.block.block_number),1),e[42]||(e[42]=j(" lot number ")),l("b",null,a(C.value.lot_number),1),e[43]||(e[43]=j("?"))])]),l("div",He,[l("button",{onClick:e[31]||(e[31]=t=>r(T).delete(c.route("lots.destroy",C.value),{onSuccess:()=>{C.value=null,h.value=!1}})),class:"text-white bg-red-500 hover:bg-red-700 active:bg-red-900 rounded-md py-1 ease-in-out duration-200"},"Delete"),l("button",{onClick:e[32]||(e[32]=t=>h.value=!1),class:"border dark:border-gray-100 border-black hover:bg-black hover:text-white dark:hover:bg-gray-100 dark:hover:text-gray-800 py-1 rounded-md ease-in-out duration-200"},"Cancel")])])]),_:1},8,["show"]),l("datalist",Je,[(u(!0),d(w,null,_(s.lot_types,t=>(u(),d("option",{value:t},a(t),9,Qe))),256))])],64))}};export{et as default};
