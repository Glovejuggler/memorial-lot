import{j as h,T as B,k as P,f as a,a as o,u as r,b as e,t as n,F as V,m as S,g as m,w as g,o as d,Z as z,n as q,q as b,d as L,p as T}from"./app-C2g_3T9Q.js";import{_ as U}from"./Modal-XyNGk3Rc.js";import{a as x,_ as p}from"./TextInput-CgBnHj3Z.js";import{_ as A}from"./Select-C0tRrusz.js";const Z={class:"py-8"},G={class:"max-w-screen-2xl mx-auto px-6 lg:px-8"},H={class:"bg-white dark:bg-gray-800 p-6 rounded-md dark:text-white border dark:border-gray-700 shadow-sm"},J={class:"lg:grid grid-cols-3 gap-2"},Q={class:"text-3xl font-bold mb-4"},R={class:"mt-4 lg:mt-0"},W={class:"mt-4 lg:mt-0"},X={key:0,class:"table table-fixed text-left text-sm"},Y={class:"pr-4 py-1"},ee={class:"pr-4 py-1"},te={class:"pr-4 py-1"},se={class:"pr-4 py-1"},le={class:"pr-4 py-1"},oe={class:"flex mt-4 space-x-2"},re={class:"py-4 flex justify-between items-center"},ne=["href"],ae=["value"],de={key:0,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border dark:border-gray-700"},ue={class:"relative overflow-x-auto rounded-lg"},ie={class:"w-full text-sm text-left text-gray-500 dark:text-gray-100 overflow-x-auto"},ce={class:"bg-white dark:bg-gray-800 border-b dark:border-gray-700 last:border-none hover:bg-black/10 cursor-pointer"},me={scope:"row",class:"px-3 py-4 font-medium text-gray-900 dark:text-gray-200 whitespace-nowrap"},be={class:"px-3 py-4"},pe={class:"px-3 py-4"},xe={class:"px-3 py-4"},ye={class:"px-3 py-4"},ve={class:"px-3 py-4"},ke={class:"px-3 py-4"},ge={class:"px-3 py-4"},fe={class:"px-3 py-4"},we={class:"space-x-1"},he=["onClick"],Ve=["onClick"],Ce={key:1,class:"flex justify-center mt-12 dark:text-gray-400 text-gray-700"},Se={class:"p-4 dark:text-white"},Ue={key:0,class:"text-sm text-red-500"},_e={key:1,class:"text-sm text-red-500"},$e={key:2,class:"text-sm text-red-500"},je={key:3,class:"text-sm text-red-500 mt-0"},Ke={key:4,class:"text-sm text-red-500"},Le={key:5,class:"text-sm text-red-500 mt-0"},Ae={key:6,class:"text-sm text-red-500 mt-0"},Oe={key:7,class:"text-sm text-red-500 mt-0"},Ne={class:"mt-6 flex flex-col-reverse md:flex-row justify-end md:space-x-6"},Be=["disabled"],Te={class:"p-4 dark:text-white"},De={key:0,class:"text-sm text-red-500"},Fe={key:1,class:"text-sm text-red-500 mt-0"},Ie={class:"mt-6 flex flex-col-reverse md:flex-row justify-end md:space-x-6"},Ee=["disabled"],Me={class:"p-4 dark:text-white"},Pe={class:"flex justify-center items-center flex-col"},ze={class:"grid grid-cols-2 gap-2 mt-6"},qe={class:"p-4 dark:text-white"},Ze={key:0,class:"text-sm text-red-500"},Ge={key:1,class:"text-sm text-red-500"},He={key:2,class:"text-sm text-red-500 mt-0"},Je={key:3,class:"text-sm text-red-500 mt-0"},Qe={key:4,class:"text-sm text-red-500"},Re={key:5,class:"text-sm text-red-500 mt-0"},We={key:6,class:"text-sm text-red-500 mt-0"},Xe={key:7,class:"text-sm text-red-500 mt-0"},Ye={class:"mt-6 flex flex-col-reverse md:flex-row justify-end md:space-x-6"},et=["disabled"],tt={class:"p-4 dark:text-white"},st={class:"flex justify-center items-center flex-col"},lt={class:"grid grid-cols-2 gap-2 mt-6"},ot={id:"lot_types"},rt=["value"],it={__name:"Show",props:{block:Object,errors:Object,lots:Object,filters:Object,occupied:Number,available:Number,tallies:Object,lot_types:Object},setup(l){const y=l,O=h(!1),_=h(!1),$=h(!1),j=h(!1),C=h(!1),f=B({name:y.block.name,block_number:y.block.block_number}),c=B({block_id:y.block.id,type:"",lot_number:"",contract_number:"",price:"",status:"",owner:"",address:"",contact:""}),u=B({block_id:y.block.id,type:"",lot_number:"",contract_number:"",price:"",status:"",owner:"",address:"",contact:"",id:""}),v=()=>{c.post(route("lots.store"),{preserveState:i=>Object.keys(i.props.errors).length>0,preserveScroll:!0})},N=()=>{f.put(route("blocks.update",y.block),{preserveScroll:!0,preserveState:i=>Object.keys(i.props.errors).length>0})},D=i=>{u.id=i.id,u.type=i.type,u.lot_number=i.lot_number,u.contract_number=i.contract_number,u.price=i.price,u.status=i.status,u.owner=i.owner,u.block_id=y.block.id,u.address=i.address,u.contact=i.contact,j.value=!0},k=()=>{u.put(route("lots.update",u.id),{preserveScroll:!0,preserveState:i=>Object.keys(i.props.errors).length>0,onSuccess:i=>{Object.keys(i.props.errors).length===1&&D.reset()}})},K=h(null),E=i=>{K.value=i,C.value=!0},w=h({search:y.filters.search,status:y.filters.status??"",type:y.filters.type??"any"});return P(w,i=>{T.get(route("blocks.show",y.block),i,{preserveState:!0,preserveScroll:!0,replace:!0})},{deep:!0}),(i,t)=>(d(),a(V,null,[o(r(z),{title:l.block.name},null,8,["title"]),e("div",Z,[e("div",G,[e("div",H,[e("div",J,[e("div",null,[e("p",Q,n(l.block.name),1),e("p",null,"Block number: "+n(l.block.block_number),1)]),e("div",R,[(d(!0),a(V,null,S(l.tallies.status,s=>(d(),a("p",null,n(`${s.status??"Available"} Lots: ${s.count}`),1))),256))]),e("div",W,[l.tallies.type.length?(d(),a("table",X,[t[35]||(t[35]=e("thead",null,[e("tr",{class:"text-xs font-bold"},[e("th",{class:"pr-4"},"Type/Category"),e("th",{class:"pr-4"},"Available"),e("th",{class:"pr-4"},"Sold"),e("th",{class:"pr-4"},"Installment"),e("th",{class:"pr-4"},"Total")])],-1)),e("tbody",null,[(d(!0),a(V,null,S(l.tallies.type,s=>(d(),a("tr",null,[e("td",Y,n(s.type??"Uncategorized"),1),e("td",ee,n(s.count-s.sold_lots-s.installment_lots),1),e("td",te,n(s.sold_lots),1),e("td",se,n(s.installment_lots),1),e("td",le,n(s.count),1)]))),256))])])):m("",!0)])]),e("div",oe,[e("button",{onClick:t[0]||(t[0]=s=>_.value=!0),class:"rounded-md text-white px-4 text-sm bg-green-500 hover:bg-green-700 active:bg-green-900 ease-in-out duration-200"},"Edit"),e("button",{onClick:t[1]||(t[1]=s=>$.value=!0),class:"rounded-md text-white px-4 text-sm bg-red-500 hover:bg-red-700 active:bg-red-900 ease-in-out duration-200"},"Delete")])]),e("div",re,[e("div",null,[t[36]||(t[36]=e("span",{class:"dark:text-white text-lg font-bold mr-4"},"Lots",-1)),e("button",{onClick:t[2]||(t[2]=s=>O.value=!0),class:"bg-blue-500 px-4 mr-4 text-sm rounded-md text-white hover:bg-blue-700 active:bg-blue-800 ease-in-out duration-200"},"Add new"),e("a",{href:i.route("blocks.export",l.block),class:"bg-yellow-500 px-4 text-sm rounded-md text-white hover:bg-yellow-700 active:bg-yellow-800 ease-in-out duration-200"},"Export",8,ne)]),e("div",null,[o(A,{modelValue:w.value.type,"onUpdate:modelValue":t[3]||(t[3]=s=>w.value.type=s)},{default:g(()=>[t[37]||(t[37]=e("option",{value:"any"},"Any",-1)),(d(!0),a(V,null,S(l.lot_types,s=>(d(),a("option",{value:s??"none"},n(s??"Uncategorized"),9,ae))),256))]),_:1},8,["modelValue"]),o(A,{modelValue:w.value.status,"onUpdate:modelValue":t[4]||(t[4]=s=>w.value.status=s)},{default:g(()=>t[38]||(t[38]=[e("option",{value:""},"All",-1),e("option",{value:"available"},"Available",-1),e("option",{value:"sold"},"Sold",-1),e("option",{value:"installment"},"Installment",-1)])),_:1},8,["modelValue"]),o(x,{modelValue:w.value.search,"onUpdate:modelValue":t[5]||(t[5]=s=>w.value.search=s),type:"text",class:"lg:w-96 lg:mt-0 w-full",placeholder:"Search"},null,8,["modelValue"])])]),l.lots.length?(d(),a("div",de,[e("div",ue,[e("table",ie,[t[39]||(t[39]=e("thead",{class:"text-xs text-gray-700 dark:text-gray-200 uppercase bg-gray-50 dark:bg-gray-800"},[e("tr",null,[e("th",{scope:"col",class:"p-3"}," Lot Number "),e("th",{scope:"col",class:"p-3"}," Type/Category "),e("th",{scope:"col",class:"p-3"}," Status "),e("th",{scope:"col",class:"p-3"}," Contract Number "),e("th",{scope:"col",class:"p-3"}," Owner "),e("th",{scope:"col",class:"p-3"}," Address "),e("th",{scope:"col",class:"p-3"}," Contact no. "),e("th",{scope:"col",class:"p-3"}," Price "),e("th",{scope:"col",class:"p-3"}," Actions ")])],-1)),e("tbody",null,[(d(!0),a(V,null,S(l.lots,s=>{var F,I;return d(),a("tr",ce,[e("th",me,n(s.lot_number),1),e("td",be,n(s.type??"Uncategorized"),1),e("td",pe,[e("span",{class:q(["text-xs rounded-lg text-white px-2",{"bg-blue-500":!s.status,"bg-yellow-500":((F=s.status)==null?void 0:F.toUpperCase())=="INSTALLMENT","bg-green-500":((I=s.status)==null?void 0:I.toUpperCase())=="SOLD"}])},n(s.status??"Available"),3)]),e("td",xe,n(s.contract_number??"-"),1),e("td",ye,n(s.owner??"-"),1),e("td",ve,n(s.address??"-"),1),e("td",ke,n(s.contact??"-"),1),e("td",ge,n(Number(s.price).toAmountFormat()),1),e("td",fe,[e("div",we,[e("i",{onClick:M=>D(s),class:"bx bx-edit w-6 h-6 rounded-full bg-green-500 hover:bg-green-700 active:bg-green-900 ease-in-out duration-200 inline-flex justify-center items-center"},null,8,he),e("i",{onClick:M=>E(s),class:"bx bx-trash w-6 h-6 rounded-full bg-red-500 hover:bg-red-700 active:bg-red-900 ease-in-out duration-200 inline-flex justify-center items-center"},null,8,Ve)])])])}),256))])])])])):(d(),a("div",Ce,t[40]||(t[40]=[e("span",null,"No data.",-1)])))])]),o(U,{show:O.value,closeable:!1},{default:g(()=>[e("div",Se,[o(p,{for:"type",value:"Type/Category"}),o(x,{list:"lot_types",onKeyup:b(v,["enter"]),id:"type",type:"text",class:"mt-1 block w-full",modelValue:r(c).type,"onUpdate:modelValue":t[6]||(t[6]=s=>r(c).type=s)},null,8,["modelValue"]),l.errors.type?(d(),a("span",Ue,n(l.errors.type),1)):m("",!0),o(p,{class:"mt-4",for:"lot_number",value:"Lot number"}),o(x,{onKeyup:b(v,["enter"]),id:"lot_number",type:"text",class:"mt-1 block w-full",modelValue:r(c).lot_number,"onUpdate:modelValue":t[7]||(t[7]=s=>r(c).lot_number=s)},null,8,["modelValue"]),l.errors.lot_number?(d(),a("span",_e,n(l.errors.lot_number),1)):m("",!0),o(p,{class:"mt-4",for:"status",value:"Status"}),o(A,{onKeyup:b(v,["enter"]),id:"status",type:"text",class:"mt-1 block w-full",modelValue:r(c).status,"onUpdate:modelValue":t[8]||(t[8]=s=>r(c).status=s)},{default:g(()=>t[41]||(t[41]=[e("option",{value:""},"Available",-1),e("option",{value:"Installment"},"Installment",-1),e("option",{value:"Sold"},"Sold",-1)])),_:1},8,["modelValue"]),l.errors.status?(d(),a("span",$e,n(l.errors.status),1)):m("",!0),o(p,{class:"mt-4",for:"price",value:"Price"}),o(x,{onKeyup:b(v,["enter"]),id:"price",type:"number",class:"mt-1 block w-full",modelValue:r(c).price,"onUpdate:modelValue":t[9]||(t[9]=s=>r(c).price=s)},null,8,["modelValue"]),l.errors.price?(d(),a("span",je,n(l.errors.price),1)):m("",!0),o(p,{class:"mt-4",for:"contract_number",value:"Contract number"}),o(x,{onKeyup:b(v,["enter"]),id:"contract_number",type:"text",class:"mt-1 block w-full",modelValue:r(c).contract_number,"onUpdate:modelValue":t[10]||(t[10]=s=>r(c).contract_number=s)},null,8,["modelValue"]),l.errors.contract_number?(d(),a("span",Ke,n(l.errors.contract_number),1)):m("",!0),o(p,{class:"mt-4",for:"owner",value:"Owner"}),o(x,{onKeyup:b(v,["enter"]),id:"owner",type:"text",class:"mt-1 block w-full",modelValue:r(c).owner,"onUpdate:modelValue":t[11]||(t[11]=s=>r(c).owner=s)},null,8,["modelValue"]),l.errors.owner?(d(),a("span",Le,n(l.errors.owner),1)):m("",!0),o(p,{class:"mt-4",for:"address",value:"Address"}),o(x,{onKeyup:b(v,["enter"]),id:"address",type:"text",class:"mt-1 block w-full",modelValue:r(c).address,"onUpdate:modelValue":t[12]||(t[12]=s=>r(c).address=s)},null,8,["modelValue"]),l.errors.address?(d(),a("span",Ae,n(l.errors.address),1)):m("",!0),o(p,{class:"mt-4",for:"contact",value:"Contact no."}),o(x,{onKeyup:b(v,["enter"]),id:"contact",type:"text",class:"mt-1 block w-full",modelValue:r(c).contact,"onUpdate:modelValue":t[13]||(t[13]=s=>r(c).contact=s)},null,8,["modelValue"]),l.errors.contact?(d(),a("span",Oe,n(l.errors.contact),1)):m("",!0),e("div",Ne,[e("button",{onClick:t[14]||(t[14]=s=>O.value=!1),type:"button",class:"dark:text-white hover:underline md:mt-0 mt-4"},"Cancel"),e("button",{onClick:v,disabled:r(c).processing,class:"bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-700 active:bg-green-900 ease-in-out duration-200 disabled:opacity-20"},n(r(c).processing?"Processing":"Submit"),9,Be)])])]),_:1},8,["show"]),o(U,{show:_.value,onClose:t[18]||(t[18]=s=>_.value=!1)},{default:g(()=>[e("div",Te,[o(p,{for:"name",value:"Block name"}),o(x,{onKeyup:b(N,["enter"]),id:"name",type:"text",class:"mt-1 block w-full",modelValue:r(f).name,"onUpdate:modelValue":t[15]||(t[15]=s=>r(f).name=s)},null,8,["modelValue"]),l.errors.name?(d(),a("span",De,n(l.errors.name),1)):m("",!0),o(p,{class:"mt-4",for:"block_number",value:"Block number"}),o(x,{onKeyup:b(N,["enter"]),id:"block_number",type:"text",class:"mt-1 block w-full",modelValue:r(f).block_number,"onUpdate:modelValue":t[16]||(t[16]=s=>r(f).block_number=s)},null,8,["modelValue"]),l.errors.block_number?(d(),a("span",Fe,n(l.errors.block_number),1)):m("",!0),e("div",Ie,[e("button",{onClick:t[17]||(t[17]=s=>_.value=!1),type:"button",class:"dark:text-white hover:underline md:mt-0 mt-4"},"Cancel"),e("button",{onClick:N,disabled:r(f).processing,class:"bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-700 active:bg-green-900 ease-in-out duration-200 disabled:opacity-20"},n(r(f).processing?"Processing":"Submit"),9,Ee)])])]),_:1},8,["show"]),o(U,{show:$.value,onClose:t[21]||(t[21]=s=>$.value=!1)},{default:g(()=>[e("div",Me,[e("div",Pe,[t[44]||(t[44]=e("i",{class:"bx bx-info-circle text-7xl text-red-500"},null,-1)),e("p",null,[t[42]||(t[42]=L("Delete the block ")),e("b",null,n(l.block.name),1),t[43]||(t[43]=L("?"))])]),e("div",ze,[e("button",{onClick:t[19]||(t[19]=s=>r(T).delete(i.route("blocks.destroy",l.block))),class:"text-white bg-red-500 hover:bg-red-700 active:bg-red-900 rounded-md py-1 ease-in-out duration-200"},"Delete"),e("button",{onClick:t[20]||(t[20]=s=>$.value=!1),class:"border dark:border-gray-100 border-black hover:bg-black hover:text-white dark:hover:bg-gray-100 dark:hover:text-gray-800 py-1 rounded-md ease-in-out duration-200"},"Cancel")])])]),_:1},8,["show"]),o(U,{show:j.value,onClose:t[31]||(t[31]=s=>j.value=!1)},{default:g(()=>[e("div",qe,[o(p,{for:"type",value:"Type"}),o(x,{list:"lot_types",onKeyup:b(k,["enter"]),id:"type",type:"text",class:"mt-1 block w-full",modelValue:r(u).type,"onUpdate:modelValue":t[22]||(t[22]=s=>r(u).type=s)},null,8,["modelValue"]),l.errors.type?(d(),a("span",Ze,n(l.errors.type),1)):m("",!0),o(p,{class:"mt-4",for:"lot_number",value:"Lot number"}),o(x,{onKeyup:b(k,["enter"]),id:"lot_number",type:"text",class:"mt-1 block w-full",modelValue:r(u).lot_number,"onUpdate:modelValue":t[23]||(t[23]=s=>r(u).lot_number=s)},null,8,["modelValue"]),l.errors.lot_number?(d(),a("span",Ge,n(l.errors.lot_number),1)):m("",!0),o(p,{class:"mt-4",for:"status",value:"Status"}),o(A,{onKeyup:b(k,["enter"]),id:"status",type:"number",class:"mt-1 block w-full",modelValue:r(u).status,"onUpdate:modelValue":t[24]||(t[24]=s=>r(u).status=s)},{default:g(()=>t[45]||(t[45]=[e("option",{value:null},"Available",-1),e("option",{value:"Installment"},"Installment",-1),e("option",{value:"Sold"},"Sold",-1)])),_:1},8,["modelValue"]),l.errors.status?(d(),a("span",He,n(l.errors.status),1)):m("",!0),o(p,{class:"mt-4",for:"price",value:"Price"}),o(x,{onKeyup:b(k,["enter"]),id:"price",type:"number",class:"mt-1 block w-full",modelValue:r(u).price,"onUpdate:modelValue":t[25]||(t[25]=s=>r(u).price=s)},null,8,["modelValue"]),l.errors.price?(d(),a("span",Je,n(l.errors.price),1)):m("",!0),o(p,{class:"mt-4",for:"contract_number",value:"Contract number"}),o(x,{onKeyup:b(k,["enter"]),id:"contract_number",type:"text",class:"mt-1 block w-full",modelValue:r(u).contract_number,"onUpdate:modelValue":t[26]||(t[26]=s=>r(u).contract_number=s)},null,8,["modelValue"]),l.errors.contract_number?(d(),a("span",Qe,n(l.errors.contract_number),1)):m("",!0),o(p,{class:"mt-4",for:"owner",value:"Owner"}),o(x,{onKeyup:b(k,["enter"]),id:"owner",type:"text",class:"mt-1 block w-full",modelValue:r(u).owner,"onUpdate:modelValue":t[27]||(t[27]=s=>r(u).owner=s)},null,8,["modelValue"]),l.errors.owner?(d(),a("span",Re,n(l.errors.owner),1)):m("",!0),o(p,{class:"mt-4",for:"address",value:"Address"}),o(x,{onKeyup:b(k,["enter"]),id:"address",type:"text",class:"mt-1 block w-full",modelValue:r(u).address,"onUpdate:modelValue":t[28]||(t[28]=s=>r(u).address=s)},null,8,["modelValue"]),l.errors.address?(d(),a("span",We,n(l.errors.address),1)):m("",!0),o(p,{class:"mt-4",for:"contact",value:"Contact no."}),o(x,{onKeyup:b(k,["enter"]),id:"contact",type:"text",class:"mt-1 block w-full",modelValue:r(u).contact,"onUpdate:modelValue":t[29]||(t[29]=s=>r(u).contact=s)},null,8,["modelValue"]),l.errors.contact?(d(),a("span",Xe,n(l.errors.contact),1)):m("",!0),e("div",Ye,[e("button",{onClick:t[30]||(t[30]=s=>j.value=!1),type:"button",class:"dark:text-white hover:underline md:mt-0 mt-4"},"Cancel"),e("button",{onClick:k,disabled:r(u).processing,class:"bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-700 active:bg-green-900 ease-in-out duration-200 disabled:opacity-20"},n(r(u).processing?"Processing":"Submit"),9,et)])])]),_:1},8,["show"]),o(U,{show:C.value,onClose:t[34]||(t[34]=s=>C.value=!1)},{default:g(()=>[e("div",tt,[e("div",st,[t[48]||(t[48]=e("i",{class:"bx bx-info-circle text-7xl text-red-500"},null,-1)),e("p",null,[t[46]||(t[46]=L("Delete lot number ")),e("b",null,n(K.value.lot_number),1),t[47]||(t[47]=L("?"))])]),e("div",lt,[e("button",{onClick:t[32]||(t[32]=s=>r(T).delete(i.route("lots.destroy",K.value),{onSuccess:()=>{K.value=null,C.value=!1}})),class:"text-white bg-red-500 hover:bg-red-700 active:bg-red-900 rounded-md py-1 ease-in-out duration-200"},"Delete"),e("button",{onClick:t[33]||(t[33]=s=>C.value=!1),class:"border dark:border-gray-100 border-black hover:bg-black hover:text-white dark:hover:bg-gray-100 dark:hover:text-gray-800 py-1 rounded-md ease-in-out duration-200"},"Cancel")])])]),_:1},8,["show"]),e("datalist",ot,[(d(!0),a(V,null,S(l.lot_types,s=>(d(),a("option",{value:s},n(s),9,rt))),256))])],64))}};export{it as default};
