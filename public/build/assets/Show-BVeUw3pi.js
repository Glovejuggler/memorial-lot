import{j as C,k as D,T as F,f as u,a,u as d,b as e,t as r,d as w,F as v,m as h,g as m,w as g,o as i,Z as P,n as B,q as b,p as $}from"./app-DD7MLECj.js";import{a as y,_ as p}from"./TextInput-BOkzSj-E.js";import{_ as S}from"./Select-CdyhZYlK.js";import{_ as K}from"./Modal-DkK-HSAa.js";import{P as E}from"./Payment-DpSThESK.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const I={class:"py-8"},z={class:"max-w-screen-2xl mx-auto px-6 lg:px-8"},M={class:"bg-white dark:bg-gray-800 p-6 rounded-md dark:text-white border dark:border-gray-700 shadow-sm"},R={class:"lg:grid grid-cols-3 gap-2"},q={class:"block font-bold text-xl"},Z={class:"block"},G={class:"block"},H={class:"mt-4 lg:mt-0"},J={key:0,class:"table table-fixed text-left text-sm"},Q={class:"pr-4 py-1"},W={class:"pr-4 py-1"},X={class:"py-4 flex justify-end"},Y=["value"],ee={key:0,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border dark:border-gray-700 mt-4"},te={class:"relative overflow-x-auto rounded-lg"},se={class:"w-full text-sm text-left text-gray-500 dark:text-gray-100"},le={class:"bg-white dark:bg-gray-800 border-b dark:border-gray-700 last:border-none hover:bg-black/10 cursor-pointer"},oe={scope:"row",class:"px-2 py-4 font-medium text-gray-900 dark:text-gray-200 whitespace-nowrap"},re={class:"px-2 py-4"},ae={class:"px-2 py-4"},ne={class:"px-2 py-4"},de={class:"px-2 py-4"},ue={class:"px-2 py-4"},ie={class:"px-2 py-4"},ce={class:"px-2 py-4"},me={class:"px-2 py-4"},be={class:"px-2 py-4"},pe={class:"space-x-1"},ye=["onClick"],xe=["onClick"],ve={key:1,class:"flex justify-center mt-12 dark:text-gray-400 text-gray-700"},ge={class:"p-4 dark:text-white"},fe=["value"],ke={key:0,class:"text-sm text-red-500"},we={key:1,class:"text-sm text-red-500"},he={key:2,class:"text-sm text-red-500"},_e={key:3,class:"text-sm text-red-500"},Ve={key:4,class:"text-sm text-red-500 mt-0"},Ce={key:5,class:"text-sm text-red-500"},Se={key:6,class:"text-sm text-red-500 mt-0"},Ue={key:7,class:"text-sm text-red-500 mt-0"},Le={key:8,class:"text-sm text-red-500 mt-0"},je={class:"grid grid-cols-2 gap-2"},$e={key:0,class:"text-sm text-red-500 mt-0"},Ke={key:0,class:"text-sm text-red-500 mt-0"},Ne={class:"mt-6 flex flex-col-reverse md:flex-row justify-end md:space-x-6"},Oe=["disabled"],Ae={class:"p-4 dark:text-white"},Te={class:"flex justify-center items-center flex-col"},De={class:"grid grid-cols-2 gap-2 mt-6"},Fe={id:"lot_types"},Pe=["value"],qe={__name:"Show",props:{blocks:Object,lots:Object,filters:Object,errors:Object,lot_types:Object,tallies:Object},setup(o){const _=o,x=C({search:_.filters.search,status:_.filters.status??"",type:_.filters.type??"any"});D(x,n=>{$.get(route("lots.index"),n,{preserveState:!0,preserveScroll:!0,replace:!0})},{deep:!0});const V=C(!1),l=F({block_id:"",lot_number:"",contract_number:"",price:"",owner:"",id:"",address:"",contact:"",type:"",status:"",co:"",date_sold:""}),L=n=>{l.id=n.id,l.lot_number=n.lot_number,l.contract_number=n.contract_number,l.price=n.price,l.owner=n.owner,l.block_id=n.block_id,l.address=n.address,l.contact=n.contact,l.type=n.type,l.status=n.status,l.co=n.co,l.date_sold=new Date(n.date_sold).toLocaleDateString("sv-SE"),V.value=!0},c=()=>{l.put(route("lots.update",l.id),{preserveScroll:!0,preserveState:n=>Object.keys(n.props.errors).length>0,onSuccess:n=>{Object.keys(n.props.errors).length===1&&L.reset()}})},f=C(!1),k=C(null),N=n=>{k.value=n,f.value=!0},O=()=>{const n=new URLSearchParams(window.location.search),t=n.get("month"),s=n.get("year");return new Date(s,t-1).toLocaleString("en-US",{month:"long",year:"numeric"})},A=_.lots.reduce((n,t)=>n+(Number(t.price)||0),0);return(n,t)=>(i(),u(v,null,[a(d(P),{title:"Report"}),e("div",I,[e("div",z,[a(E),e("div",M,[e("div",R,[e("div",null,[e("span",q,r(O())+" Sales Report",1),e("span",Z,[t[19]||(t[19]=w("Total Lots sold: ")),e("b",null,r(o.lots.length),1)]),e("span",G,[t[20]||(t[20]=w("Total sales: ")),e("b",null,r(d(A).toLocaleString()),1)])]),e("div",H,[o.tallies.type.length?(i(),u("table",J,[t[21]||(t[21]=e("thead",null,[e("tr",{class:"text-xs font-bold"},[e("th",{class:"pr-4"},"Type/Category"),e("th",{class:"pr-4"},"Total")])],-1)),e("tbody",null,[(i(!0),u(v,null,h(o.tallies.type,s=>(i(),u("tr",null,[e("td",Q,r(s.type??"Uncategorized"),1),e("td",W,r(s.count),1)]))),256))])])):m("",!0)])])]),e("div",X,[e("div",null,[a(S,{modelValue:x.value.type,"onUpdate:modelValue":t[0]||(t[0]=s=>x.value.type=s)},{default:g(()=>[t[22]||(t[22]=e("option",{value:"any"},"Any",-1)),(i(!0),u(v,null,h(o.lot_types,s=>(i(),u("option",{value:s??"none"},r(s??"Uncategorized"),9,Y))),256))]),_:1},8,["modelValue"]),a(S,{modelValue:x.value.status,"onUpdate:modelValue":t[1]||(t[1]=s=>x.value.status=s)},{default:g(()=>t[23]||(t[23]=[e("option",{value:""},"All",-1),e("option",{value:"available"},"Available",-1),e("option",{value:"sold"},"Sold",-1),e("option",{value:"installment"},"Installment",-1)])),_:1},8,["modelValue"]),a(y,{modelValue:x.value.search,"onUpdate:modelValue":t[2]||(t[2]=s=>x.value.search=s),type:"text",class:"lg:w-96 lg:mt-0 w-full",placeholder:"Search"},null,8,["modelValue"])])]),o.lots.length?(i(),u("div",ee,[e("div",te,[e("table",se,[t[24]||(t[24]=e("thead",{class:"text-xs text-gray-700 dark:text-gray-200 uppercase bg-gray-50 dark:bg-gray-800"},[e("tr",null,[e("th",{scope:"col",class:"p-3"}," Block Number "),e("th",{scope:"col",class:"p-3"}," Lot Number "),e("th",{scope:"col",class:"p-3"}," Type/Category "),e("th",{scope:"col",class:"p-3"}," Status "),e("th",{scope:"col",class:"p-3"}," Contract Number "),e("th",{scope:"col",class:"p-3"}," Owner "),e("th",{scope:"col",class:"p-3"}," Address "),e("th",{scope:"col",class:"p-3"}," Contact no. "),e("th",{scope:"col",class:"p-3"}," Price "),e("th",{scope:"col",class:"p-3"}," Actions ")])],-1)),e("tbody",null,[(i(!0),u(v,null,h(o.lots,s=>{var U,j;return i(),u("tr",le,[e("th",oe,r(s.block.block_number??"-"),1),e("td",re,r(s.lot_number),1),e("td",ae,r(s.type??"-"),1),e("td",ne,[e("span",{class:B(["text-xs rounded-lg text-white px-2",{"bg-blue-500":!s.status,"bg-yellow-500":((U=s.status)==null?void 0:U.toUpperCase())=="INSTALLMENT","bg-green-500":((j=s.status)==null?void 0:j.toUpperCase())=="SOLD"}])},r(s.status??"Available"),3)]),e("td",de,r(s.contract_number??"-"),1),e("td",ue,r(s.owner??"-"),1),e("td",ie,r(s.address??"-"),1),e("td",ce,r(s.contact??"-"),1),e("td",me,r(Number(s.price).toAmountFormat()),1),e("td",be,[e("div",pe,[e("i",{onClick:T=>L(s),class:"bx bx-edit w-6 h-6 rounded-full bg-green-500 hover:bg-green-700 active:bg-green-900 ease-in-out duration-200 inline-flex justify-center items-center"},null,8,ye),e("i",{onClick:T=>N(s),class:"bx bx-trash w-6 h-6 rounded-full bg-red-500 hover:bg-red-700 active:bg-red-900 ease-in-out duration-200 inline-flex justify-center items-center"},null,8,xe)])])])}),256))])])])])):(i(),u("div",ve,t[25]||(t[25]=[e("span",null,"No data.",-1)])))])]),a(K,{show:V.value,onClose:t[15]||(t[15]=s=>V.value=!1)},{default:g(()=>[e("div",ge,[a(p,{for:"block_number",value:"Block number"}),a(S,{onKeyup:b(c,["enter"]),id:"block_number",class:"mt-1 block w-full",modelValue:d(l).block_id,"onUpdate:modelValue":t[3]||(t[3]=s=>d(l).block_id=s)},{default:g(()=>[(i(!0),u(v,null,h(o.blocks,s=>(i(),u("option",{value:s.id},r(`${s.block_number} (${s.name})`),9,fe))),256))]),_:1},8,["modelValue"]),o.errors.block_id?(i(),u("span",ke,r(o.errors.block_id),1)):m("",!0),a(p,{class:"mt-4",for:"type",value:"Type/Category"}),a(y,{list:"lot_types",onKeyup:b(c,["enter"]),id:"type",class:"mt-1 block w-full",modelValue:d(l).type,"onUpdate:modelValue":t[4]||(t[4]=s=>d(l).type=s)},null,8,["modelValue"]),o.errors.type?(i(),u("span",we,r(o.errors.type),1)):m("",!0),a(p,{class:"mt-4",for:"lot_number",value:"Lot number"}),a(y,{onKeyup:b(c,["enter"]),id:"lot_number",type:"text",class:"mt-1 block w-full",modelValue:d(l).lot_number,"onUpdate:modelValue":t[5]||(t[5]=s=>d(l).lot_number=s)},null,8,["modelValue"]),o.errors.lot_number?(i(),u("span",he,r(o.errors.lot_number),1)):m("",!0),a(p,{class:"mt-4",for:"status",value:"Status"}),a(S,{onKeyup:b(c,["enter"]),id:"status",type:"text",class:"mt-1 block w-full",modelValue:d(l).status,"onUpdate:modelValue":t[6]||(t[6]=s=>d(l).status=s)},{default:g(()=>t[26]||(t[26]=[e("option",{value:""},"Available",-1),e("option",{value:"Installment"},"Installment",-1),e("option",{value:"Sold"},"Sold",-1)])),_:1},8,["modelValue"]),o.errors.status?(i(),u("span",_e,r(o.errors.status),1)):m("",!0),a(p,{class:"mt-4",for:"price",value:"Price"}),a(y,{onKeyup:b(c,["enter"]),id:"price",type:"number",class:"mt-1 block w-full",modelValue:d(l).price,"onUpdate:modelValue":t[7]||(t[7]=s=>d(l).price=s)},null,8,["modelValue"]),o.errors.price?(i(),u("span",Ve,r(o.errors.price),1)):m("",!0),a(p,{class:"mt-4",for:"contract_number",value:"Contract number"}),a(y,{onKeyup:b(c,["enter"]),id:"contract_number",type:"text",class:"mt-1 block w-full",modelValue:d(l).contract_number,"onUpdate:modelValue":t[8]||(t[8]=s=>d(l).contract_number=s)},null,8,["modelValue"]),o.errors.contract_number?(i(),u("span",Ce,r(o.errors.contract_number),1)):m("",!0),a(p,{class:"mt-4",for:"owner",value:"Owner"}),a(y,{onKeyup:b(c,["enter"]),id:"owner",type:"text",class:"mt-1 block w-full",modelValue:d(l).owner,"onUpdate:modelValue":t[9]||(t[9]=s=>d(l).owner=s)},null,8,["modelValue"]),o.errors.owner?(i(),u("span",Se,r(o.errors.owner),1)):m("",!0),a(p,{class:"mt-4",for:"address",value:"Address"}),a(y,{onKeyup:b(c,["enter"]),id:"address",type:"text",class:"mt-1 block w-full",modelValue:d(l).address,"onUpdate:modelValue":t[10]||(t[10]=s=>d(l).address=s)},null,8,["modelValue"]),o.errors.address?(i(),u("span",Ue,r(o.errors.address),1)):m("",!0),a(p,{class:"mt-4",for:"contact",value:"Contact no."}),a(y,{onKeyup:b(c,["enter"]),id:"contact",type:"text",class:"mt-1 block w-full",modelValue:d(l).contact,"onUpdate:modelValue":t[11]||(t[11]=s=>d(l).contact=s)},null,8,["modelValue"]),o.errors.contact?(i(),u("span",Le,r(o.errors.contact),1)):m("",!0),e("div",je,[e("div",null,[a(p,{class:"mt-4",for:"co",value:"Certificate of Ownership no."}),a(y,{onKeyup:b(c,["enter"]),id:"co",type:"text",class:"mt-1 block w-full",modelValue:d(l).co,"onUpdate:modelValue":t[12]||(t[12]=s=>d(l).co=s)},null,8,["modelValue"]),o.errors.co?(i(),u("span",$e,r(o.errors.co),1)):m("",!0)]),e("div",null,[a(p,{class:"mt-4",for:"date_sold",value:"Date sold"}),a(y,{onKeyup:b(c,["enter"]),id:"date_sold",type:"date",class:"mt-1 block w-full",modelValue:d(l).date_sold,"onUpdate:modelValue":t[13]||(t[13]=s=>d(l).date_sold=s)},null,8,["modelValue"]),o.errors.date_sold?(i(),u("span",Ke,r(o.errors.date_sold),1)):m("",!0)])]),e("div",Ne,[e("button",{onClick:t[14]||(t[14]=s=>V.value=!1),type:"button",class:"dark:text-white hover:underline md:mt-0 mt-4"},"Cancel"),e("button",{onClick:c,disabled:d(l).processing,class:"bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-700 active:bg-green-900 ease-in-out duration-200 disabled:opacity-20"},r(d(l).processing?"Processing":"Submit"),9,Oe)])])]),_:1},8,["show"]),a(K,{show:f.value,onClose:t[18]||(t[18]=s=>f.value=!1)},{default:g(()=>[e("div",Ae,[e("div",Te,[t[30]||(t[30]=e("i",{class:"bx bx-info-circle text-7xl text-red-500"},null,-1)),e("p",null,[t[27]||(t[27]=w("Delete block number ")),e("b",null,r(k.value.block.block_number),1),t[28]||(t[28]=w(" lot number ")),e("b",null,r(k.value.lot_number),1),t[29]||(t[29]=w("?"))])]),e("div",De,[e("button",{onClick:t[16]||(t[16]=s=>d($).delete(n.route("lots.destroy",k.value),{onSuccess:()=>{k.value=null,f.value=!1}})),class:"text-white bg-red-500 hover:bg-red-700 active:bg-red-900 rounded-md py-1 ease-in-out duration-200"},"Delete"),e("button",{onClick:t[17]||(t[17]=s=>f.value=!1),class:"border dark:border-gray-100 border-black hover:bg-black hover:text-white dark:hover:bg-gray-100 dark:hover:text-gray-800 py-1 rounded-md ease-in-out duration-200"},"Cancel")])])]),_:1},8,["show"]),e("datalist",Fe,[(i(!0),u(v,null,h(o.lot_types,s=>(i(),u("option",{value:s},r(s),9,Pe))),256))])],64))}};export{qe as default};
