import{k,T as _,l as V,f as a,a as n,u as l,b as t,m as B,F as f,p as C,w as N,o as u,Z as j,q as x,t as d,s as v,g as y}from"./app-C0GPvxpP.js";import{_ as S}from"./Modal-DwRcHw-7.js";import{a as p,_ as w}from"./TextInput-CStzRrLZ.js";const $={class:"pt-4 pb-8"},F={class:"max-w-7xl mx-auto px-6 lg:px-8"},O={class:"lg:flex justify-between items-center sticky top-0 dark:bg-gray-900 bg-gray-100 py-4"},K={key:0,class:"grid lg:grid-cols-4 grid-cols-1 mt-4 gap-4"},U=["onClick"],q={key:1,class:"flex justify-center mt-12 dark:text-gray-400 text-gray-700"},A={class:"p-4 dark:text-white"},M={key:0,class:"text-sm text-red-500"},T={key:1,class:"text-sm text-red-500 mt-0"},D={class:"mt-6 flex flex-col-reverse md:flex-row justify-end md:space-x-6"},E=["disabled"],z={__name:"Index",props:{blocks:Object,filters:Object,errors:Object},setup(o){const h=o,c=k(!1),g=k(null),r=_({name:"",block_number:""}),m=k({search:h.filters.search});V(m,i=>{x.get(route("blocks.index"),i,{preserveState:!0,preserveScroll:!0,replace:!0})},{deep:!0});const b=()=>{r.post(route("blocks.store"),{preserveState:i=>Object.keys(i.props.errors).length>0,preserveScroll:!0})};return(i,e)=>(u(),a(f,null,[n(l(j),{title:"Memorial"}),t("div",$,[t("div",F,[t("div",O,[t("div",null,[e[6]||(e[6]=t("span",{class:"dark:text-white text-lg font-bold mr-4"},"Blocks",-1)),t("button",{onClick:e[0]||(e[0]=()=>{c.value=!0,B(()=>g.value.focus())}),class:"bg-blue-500 px-4 text-sm rounded-md text-white hover:bg-blue-700 active:bg-blue-800 ease-in-out duration-200"},"Add new")]),n(p,{modelValue:m.value.search,"onUpdate:modelValue":e[1]||(e[1]=s=>m.value.search=s),type:"text",class:"lg:w-96 mt-4 lg:mt-0 w-full",placeholder:"Search"},null,8,["modelValue"])]),o.blocks.length?(u(),a("div",K,[(u(!0),a(f,null,C(o.blocks,s=>(u(),a("div",{onClick:I=>l(x).get(i.route("blocks.show",s)),class:"w-full lg:aspect-video rounded-md border dark:border-gray-700 bg-white dark:bg-gray-800 p-4 dark:text-white flex flex-col cursor-pointer hover:shadow-md dark:hover:bg-gray-700 ease-in-out duration-200"},[t("span",null,"Name: "+d(s.name),1),t("span",null,"Block number: "+d(s.block_number),1),t("span",null,"Available lots: "+d(s.lots_count-s.acquired_lots_count),1)],8,U))),256))])):(u(),a("div",q,e[7]||(e[7]=[t("span",null,"No data.",-1)])))])]),n(S,{show:c.value,onClose:e[5]||(e[5]=s=>c.value=!1)},{default:N(()=>[t("div",A,[n(w,{for:"name",value:"Block name"}),n(p,{ref_key:"blockName",ref:g,onKeyup:v(b,["enter"]),id:"name",type:"text",class:"mt-1 block w-full",modelValue:l(r).name,"onUpdate:modelValue":e[2]||(e[2]=s=>l(r).name=s)},null,8,["modelValue"]),o.errors.name?(u(),a("span",M,d(o.errors.name),1)):y("",!0),n(w,{class:"mt-4",for:"block_number",value:"Block number"}),n(p,{onKeyup:v(b,["enter"]),id:"block_number",type:"text",class:"mt-1 block w-full",modelValue:l(r).block_number,"onUpdate:modelValue":e[3]||(e[3]=s=>l(r).block_number=s)},null,8,["modelValue"]),o.errors.block_number?(u(),a("span",T,d(o.errors.block_number),1)):y("",!0),t("div",D,[t("button",{onClick:e[4]||(e[4]=s=>c.value=!1),type:"button",class:"dark:text-white hover:underline md:mt-0 mt-4"},"Cancel"),t("button",{onClick:b,disabled:l(r).processing,class:"bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-700 active:bg-green-900 ease-in-out duration-200 disabled:opacity-20"},d(l(r).processing?"Processing":"Submit"),9,E)])])]),_:1},8,["show"])],64))}};export{z as default};
