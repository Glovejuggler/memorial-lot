import{j as h,k as D,T as F,f as u,a as r,u as n,b as e,t as a,w as v,F as k,m as V,o as c,Z as T,n as B,q as m,g as p,d as U,p as $}from"./app-DYdx_Dz3.js";import{a as y,_ as b}from"./TextInput-DVsBTgbB.js";import{_}from"./Select-J2PycDgA.js";import{_ as K}from"./Modal-CMAuzbP9.js";const I={class:"py-8"},P={class:"max-w-screen-2xl mx-auto px-6 lg:px-8"},E={class:"py-4 flex justify-between"},M={class:"dark:text-white text-lg font-bold mr-4"},z=["value"],R={key:0,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border dark:border-gray-700 mt-4"},q={class:"relative overflow-x-auto rounded-lg"},Z={class:"w-full text-sm text-left text-gray-500 dark:text-gray-100"},G={class:"bg-white dark:bg-gray-800 border-b dark:border-gray-700 last:border-none hover:bg-black/10 cursor-pointer"},H={scope:"row",class:"px-2 py-4 font-medium text-gray-900 dark:text-gray-200 whitespace-nowrap"},J={class:"px-2 py-4"},Q={class:"px-2 py-4"},W={class:"px-2 py-4"},X={class:"px-2 py-4"},Y={class:"px-2 py-4"},ee={class:"px-2 py-4"},te={class:"px-2 py-4"},se={class:"px-2 py-4"},le={class:"px-2 py-4"},oe={class:"space-x-1"},re=["onClick"],ae=["onClick"],ne={key:1,class:"flex justify-center mt-12 dark:text-gray-400 text-gray-700"},de={class:"p-4 dark:text-white"},ue=["value"],ce={key:0,class:"text-sm text-red-500"},ie={key:1,class:"text-sm text-red-500"},me={key:2,class:"text-sm text-red-500"},pe={key:3,class:"text-sm text-red-500"},be={key:4,class:"text-sm text-red-500 mt-0"},ye={key:5,class:"text-sm text-red-500"},xe={key:6,class:"text-sm text-red-500 mt-0"},ve={key:7,class:"text-sm text-red-500 mt-0"},fe={key:8,class:"text-sm text-red-500 mt-0"},ge={class:"grid grid-cols-2 gap-2"},ke={key:0,class:"text-sm text-red-500 mt-0"},we={key:0,class:"text-sm text-red-500 mt-0"},he={class:"mt-6 flex flex-col-reverse md:flex-row justify-end md:space-x-6"},Ve=["disabled"],_e={class:"p-4 dark:text-white"},Ce={class:"flex justify-center items-center flex-col"},Se={class:"grid grid-cols-2 gap-2 mt-6"},Ue={id:"lot_types"},Le=["value"],Oe={__name:"Show",props:{blocks:Object,lots:Object,filters:Object,errors:Object,lot_types:Object},setup(o){const C=o,x=h({search:C.filters.search,status:C.filters.status??"",type:C.filters.type??"any"});D(x,d=>{$.get(route("lots.index"),d,{preserveState:!0,preserveScroll:!0,replace:!0})},{deep:!0});const w=h(!1),l=F({block_id:"",lot_number:"",contract_number:"",price:"",owner:"",id:"",address:"",contact:"",type:"",status:"",co:"",date_sold:""}),L=d=>{l.id=d.id,l.lot_number=d.lot_number,l.contract_number=d.contract_number,l.price=d.price,l.owner=d.owner,l.block_id=d.block_id,l.address=d.address,l.contact=d.contact,l.type=d.type,l.status=d.status,l.co=d.co,l.date_sold=d.date_sold,w.value=!0},i=()=>{l.put(route("lots.update",l.id),{preserveScroll:!0,preserveState:d=>Object.keys(d.props.errors).length>0,onSuccess:d=>{Object.keys(d.props.errors).length===1&&L.reset()}})},f=h(!1),g=h(null),N=d=>{g.value=d,f.value=!0},O=()=>{const d=new URLSearchParams(window.location.search),s=d.get("month"),t=d.get("year");return new Date(t,s-1).toLocaleString("en-US",{month:"long",year:"numeric"})};return(d,s)=>(c(),u(k,null,[r(n(T),{title:"Report"}),e("div",I,[e("div",P,[e("div",E,[e("div",null,[e("span",M,a(O()),1)]),e("div",null,[r(_,{modelValue:x.value.type,"onUpdate:modelValue":s[0]||(s[0]=t=>x.value.type=t)},{default:v(()=>[s[19]||(s[19]=e("option",{value:"any"},"Any",-1)),(c(!0),u(k,null,V(o.lot_types,t=>(c(),u("option",{value:t??"none"},a(t??"Uncategorized"),9,z))),256))]),_:1},8,["modelValue"]),r(_,{modelValue:x.value.status,"onUpdate:modelValue":s[1]||(s[1]=t=>x.value.status=t)},{default:v(()=>s[20]||(s[20]=[e("option",{value:""},"All",-1),e("option",{value:"available"},"Available",-1),e("option",{value:"sold"},"Sold",-1),e("option",{value:"installment"},"Installment",-1)])),_:1},8,["modelValue"]),r(y,{modelValue:x.value.search,"onUpdate:modelValue":s[2]||(s[2]=t=>x.value.search=t),type:"text",class:"lg:w-96 lg:mt-0 w-full",placeholder:"Search"},null,8,["modelValue"])])]),o.lots.length?(c(),u("div",R,[e("div",q,[e("table",Z,[s[21]||(s[21]=e("thead",{class:"text-xs text-gray-700 dark:text-gray-200 uppercase bg-gray-50 dark:bg-gray-800"},[e("tr",null,[e("th",{scope:"col",class:"p-3"}," Block Number "),e("th",{scope:"col",class:"p-3"}," Lot Number "),e("th",{scope:"col",class:"p-3"}," Type/Category "),e("th",{scope:"col",class:"p-3"}," Status "),e("th",{scope:"col",class:"p-3"}," Contract Number "),e("th",{scope:"col",class:"p-3"}," Owner "),e("th",{scope:"col",class:"p-3"}," Address "),e("th",{scope:"col",class:"p-3"}," Contact no. "),e("th",{scope:"col",class:"p-3"}," Price "),e("th",{scope:"col",class:"p-3"}," Actions ")])],-1)),e("tbody",null,[(c(!0),u(k,null,V(o.lots,t=>{var S,j;return c(),u("tr",G,[e("th",H,a(t.block.block_number??"-"),1),e("td",J,a(t.lot_number),1),e("td",Q,a(t.type??"-"),1),e("td",W,[e("span",{class:B(["text-xs rounded-lg text-white px-2",{"bg-blue-500":!t.status,"bg-yellow-500":((S=t.status)==null?void 0:S.toUpperCase())=="INSTALLMENT","bg-green-500":((j=t.status)==null?void 0:j.toUpperCase())=="SOLD"}])},a(t.status??"Available"),3)]),e("td",X,a(t.contract_number??"-"),1),e("td",Y,a(t.owner??"-"),1),e("td",ee,a(t.address??"-"),1),e("td",te,a(t.contact??"-"),1),e("td",se,a(Number(t.price).toAmountFormat()),1),e("td",le,[e("div",oe,[e("i",{onClick:A=>L(t),class:"bx bx-edit w-6 h-6 rounded-full bg-green-500 hover:bg-green-700 active:bg-green-900 ease-in-out duration-200 inline-flex justify-center items-center"},null,8,re),e("i",{onClick:A=>N(t),class:"bx bx-trash w-6 h-6 rounded-full bg-red-500 hover:bg-red-700 active:bg-red-900 ease-in-out duration-200 inline-flex justify-center items-center"},null,8,ae)])])])}),256))])])])])):(c(),u("div",ne,s[22]||(s[22]=[e("span",null,"No data.",-1)])))])]),r(K,{show:w.value,onClose:s[15]||(s[15]=t=>w.value=!1)},{default:v(()=>[e("div",de,[r(b,{for:"block_number",value:"Block number"}),r(_,{onKeyup:m(i,["enter"]),id:"block_number",class:"mt-1 block w-full",modelValue:n(l).block_id,"onUpdate:modelValue":s[3]||(s[3]=t=>n(l).block_id=t)},{default:v(()=>[(c(!0),u(k,null,V(o.blocks,t=>(c(),u("option",{value:t.id},a(`${t.block_number} (${t.name})`),9,ue))),256))]),_:1},8,["modelValue"]),o.errors.block_id?(c(),u("span",ce,a(o.errors.block_id),1)):p("",!0),r(b,{class:"mt-4",for:"type",value:"Type/Category"}),r(y,{list:"lot_types",onKeyup:m(i,["enter"]),id:"type",class:"mt-1 block w-full",modelValue:n(l).type,"onUpdate:modelValue":s[4]||(s[4]=t=>n(l).type=t)},null,8,["modelValue"]),o.errors.type?(c(),u("span",ie,a(o.errors.type),1)):p("",!0),r(b,{class:"mt-4",for:"lot_number",value:"Lot number"}),r(y,{onKeyup:m(i,["enter"]),id:"lot_number",type:"text",class:"mt-1 block w-full",modelValue:n(l).lot_number,"onUpdate:modelValue":s[5]||(s[5]=t=>n(l).lot_number=t)},null,8,["modelValue"]),o.errors.lot_number?(c(),u("span",me,a(o.errors.lot_number),1)):p("",!0),r(b,{class:"mt-4",for:"status",value:"Status"}),r(_,{onKeyup:m(i,["enter"]),id:"status",type:"text",class:"mt-1 block w-full",modelValue:n(l).status,"onUpdate:modelValue":s[6]||(s[6]=t=>n(l).status=t)},{default:v(()=>s[23]||(s[23]=[e("option",{value:""},"Available",-1),e("option",{value:"Installment"},"Installment",-1),e("option",{value:"Sold"},"Sold",-1)])),_:1},8,["modelValue"]),o.errors.status?(c(),u("span",pe,a(o.errors.status),1)):p("",!0),r(b,{class:"mt-4",for:"price",value:"Price"}),r(y,{onKeyup:m(i,["enter"]),id:"price",type:"number",class:"mt-1 block w-full",modelValue:n(l).price,"onUpdate:modelValue":s[7]||(s[7]=t=>n(l).price=t)},null,8,["modelValue"]),o.errors.price?(c(),u("span",be,a(o.errors.price),1)):p("",!0),r(b,{class:"mt-4",for:"contract_number",value:"Contract number"}),r(y,{onKeyup:m(i,["enter"]),id:"contract_number",type:"text",class:"mt-1 block w-full",modelValue:n(l).contract_number,"onUpdate:modelValue":s[8]||(s[8]=t=>n(l).contract_number=t)},null,8,["modelValue"]),o.errors.contract_number?(c(),u("span",ye,a(o.errors.contract_number),1)):p("",!0),r(b,{class:"mt-4",for:"owner",value:"Owner"}),r(y,{onKeyup:m(i,["enter"]),id:"owner",type:"text",class:"mt-1 block w-full",modelValue:n(l).owner,"onUpdate:modelValue":s[9]||(s[9]=t=>n(l).owner=t)},null,8,["modelValue"]),o.errors.owner?(c(),u("span",xe,a(o.errors.owner),1)):p("",!0),r(b,{class:"mt-4",for:"address",value:"Address"}),r(y,{onKeyup:m(i,["enter"]),id:"address",type:"text",class:"mt-1 block w-full",modelValue:n(l).address,"onUpdate:modelValue":s[10]||(s[10]=t=>n(l).address=t)},null,8,["modelValue"]),o.errors.address?(c(),u("span",ve,a(o.errors.address),1)):p("",!0),r(b,{class:"mt-4",for:"contact",value:"Contact no."}),r(y,{onKeyup:m(i,["enter"]),id:"contact",type:"text",class:"mt-1 block w-full",modelValue:n(l).contact,"onUpdate:modelValue":s[11]||(s[11]=t=>n(l).contact=t)},null,8,["modelValue"]),o.errors.contact?(c(),u("span",fe,a(o.errors.contact),1)):p("",!0),e("div",ge,[e("div",null,[r(b,{class:"mt-4",for:"co",value:"Certificate of Ownership no."}),r(y,{onKeyup:m(i,["enter"]),id:"co",type:"text",class:"mt-1 block w-full",modelValue:n(l).co,"onUpdate:modelValue":s[12]||(s[12]=t=>n(l).co=t)},null,8,["modelValue"]),o.errors.co?(c(),u("span",ke,a(o.errors.co),1)):p("",!0)]),e("div",null,[r(b,{class:"mt-4",for:"date_sold",value:"Date sold"}),r(y,{onKeyup:m(i,["enter"]),id:"date_sold",type:"date",class:"mt-1 block w-full",modelValue:n(l).date_sold,"onUpdate:modelValue":s[13]||(s[13]=t=>n(l).date_sold=t)},null,8,["modelValue"]),o.errors.date_sold?(c(),u("span",we,a(o.errors.date_sold),1)):p("",!0)])]),e("div",he,[e("button",{onClick:s[14]||(s[14]=t=>w.value=!1),type:"button",class:"dark:text-white hover:underline md:mt-0 mt-4"},"Cancel"),e("button",{onClick:i,disabled:n(l).processing,class:"bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-700 active:bg-green-900 ease-in-out duration-200 disabled:opacity-20"},a(n(l).processing?"Processing":"Submit"),9,Ve)])])]),_:1},8,["show"]),r(K,{show:f.value,onClose:s[18]||(s[18]=t=>f.value=!1)},{default:v(()=>[e("div",_e,[e("div",Ce,[s[27]||(s[27]=e("i",{class:"bx bx-info-circle text-7xl text-red-500"},null,-1)),e("p",null,[s[24]||(s[24]=U("Delete block number ")),e("b",null,a(g.value.block.block_number),1),s[25]||(s[25]=U(" lot number ")),e("b",null,a(g.value.lot_number),1),s[26]||(s[26]=U("?"))])]),e("div",Se,[e("button",{onClick:s[16]||(s[16]=t=>n($).delete(d.route("lots.destroy",g.value),{onSuccess:()=>{g.value=null,f.value=!1}})),class:"text-white bg-red-500 hover:bg-red-700 active:bg-red-900 rounded-md py-1 ease-in-out duration-200"},"Delete"),e("button",{onClick:s[17]||(s[17]=t=>f.value=!1),class:"border dark:border-gray-100 border-black hover:bg-black hover:text-white dark:hover:bg-gray-100 dark:hover:text-gray-800 py-1 rounded-md ease-in-out duration-200"},"Cancel")])])]),_:1},8,["show"]),e("datalist",Ue,[(c(!0),u(k,null,V(o.lot_types,t=>(c(),u("option",{value:t},a(t),9,Le))),256))])],64))}};export{Oe as default};
